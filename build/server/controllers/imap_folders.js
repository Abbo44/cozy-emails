// Generated by CoffeeScript 1.7.1
var ImapFolder;

ImapFolder = require('../models/imap_folder');

module.exports.listByMailbox = function(req, res, next) {
  return ImapFolder.getByMailbox(req.mailbox.id, function(err, emails) {
    if (err != null) {
      return next(err);
    } else {
      return res.send(200, emails);
    }
  });
};

module.exports.fetch = function(req, res, next) {
  return ImapFolder.find(req.params.id, function(err, imapFolder) {
    if (err != null) {
      return next(err);
    } else if (imapFolder == null) {
      err = new Error('Not found');
      err.status = 404;
      return next(err);
    } else {
      req.imapFolder = imapFolder;
      return next();
    }
  });
};
