// Generated by CoffeeScript 1.7.1
var Email;

Email = require('../models/Email');

module.exports.listByMailbox = function(req, res, next) {
  return Email.getByMailbox(req.mailbox.id, function(err, emails) {
    if (err != null) {
      return next(err);
    } else {
      return res.send(200, emails);
    }
  });
};

module.exports.fetch = function(req, res, next) {
  return Email.find(req.params.id, function(err, email) {
    if (err != null) {
      return next(err);
    } else if (email == null) {
      err = new Error('Not found');
      err.status = 404;
      return next(err);
    } else {
      req.email = email;
      return next();
    }
  });
};

module.exports.get = function(req, res, next) {
  return res.send(200, req.email);
};
