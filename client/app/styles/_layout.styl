/*
  LAYOUT

  Positions the boxes that compose the layout.
    -- No styling (colors, ...), just positionning

  The overall positionning is handled by Bootstrap Grid.

    - left sidebar is the mailbox menu (nav#menu)
    - the left space is filled with the (#page-content)
      - top bar for quick actions (#quick-actions)
      - left panel (section#left-panel)
      - right panel (section#right-panel)

  Left and right panel can hold several type of content.

  We use a lot `display flex`, here is how it works (FR):
  http://www.alsacreations.com/tuto/lire/1493-css3-flexbox-layout-module.html
*/

// Makes the #menu div and the application main row be at screen height.
.container-fluid, .container-fluid > .row
  height 100%

/*
  MENU

  Menu positionning is handled by Bootstrap grid, except for smaller devices
*/
@media (max-width 992px)
  #menu
    position absolute
    z-index 150

/*
  PAGE CONTENT
*/
#page-content

    // We use a flexbox display so the #panels take all the height left
    display flex
    flex-direction column

    position relative
    height 100%
    overflow hidden

    // when menu is open on smaller devices
    &.pushed
        transform translate(33%)

    /*
    Quick actions bar
    */
    #quick-actions
        margin 1em 0

    // We want the panel to be scrollable independantly but not their parent
    #panels
        flex 1
        overflow-y hidden
        height 100%
        position relative

        // layout
        .panel
            overflow-y auto
            height 100%
            margin 0
            padding 1em 1em 0 1em

            // to ease transitions
            position absolute

            // left panel
            &:first-of-type
                // visual separation between panels
                border-right 1px solid #e4e4e4
                //z-index 100

            // right panel
            &:nth-of-type(2)
                left 50%
                //z-index 50

            @media (max-width: 992px) {
                &:nth-of-type(2) {
                  left 0
                }
            }


        // transitions / animations
        .panel

            // left panel
            &:first-of-type
                // collapse animation
                &.col-md-6
                  transition width animationDuration ease

                // expand animation
                &.col-md-12
                  transition width animationDuration ease

                // 'enter' animation
                &.moveFromLeft
                  animation moveFromLeft animationDuration ease

                // 'enter' animation (from top right corner)
                &.moveFromTopRightCorner
                  animation moveFromTopRightCorner 0.2s ease

                // right panel expands animation
                // it's actually the left panel and we trick user's eyes
                &.expandFromRight
                  animation expandFromRight animationDuration ease

            // right panel
            &:nth-of-type(2)
                // 'enter' animation from right
                &.slide-in-from-right
                  animation moveFromRight animationDuration ease

                // 'enter' animation from left
                &.slide-in-from-left
                  animation moveFromLeft animationDuration ease-out
